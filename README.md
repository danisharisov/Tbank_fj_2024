# Описание ДЗ 13

## Подключение Spring Security и защита эндпоинтов

### 1. Регистрация пользователей
- Реализован эндпоинт для регистрации новых пользователей (`/auth/sign-up`).
- Зарегистрированные пользователи получают роль `USER` и сохраняются в базе данных.
- Пароли хранятся с использованием алгоритма хеширования `bcrypt`.

### 2. Логин и логаут
- Реализованы эндпоинты для логина (`/auth/sign-in`) и логаута (`/auth/logout`).
- При успешной аутентификации пользователю выдается JWT токен, действующий 10 минут. При выборе опции "запомнить меня" токен активен 30 дней.
- Механизм логаута инвалидирует текущий токен, удаляя его, что предотвращает дальнейшее использование.

### 3. Сброс пароля
- Реализован функционал сброса пароля через эндпоинт `/auth/reset-password`.
- Для двухфакторной аутентификации используется заглушка с кодом "0000" в качестве подтверждения.

### 4. Авторизация и доступ
- Настроена авторизация на уровне ролей, где доступ к определенным эндпоинтам разрешен только для пользователей с определенными ролями, например, доступ к эндпоинтам `admin` разрешен только пользователям с ролью `ADMIN`.

## Реализованные сущности и классы

### Сущность `User`
- `id` - `Long`: уникальный идентификатор пользователя.
- `username` - `String`: имя пользователя.
- `password` - `String`: пароль пользователя, сохраненный в зашифрованном виде.
- `email` - `String`: почта пользователя.
- `role` - `Role`: роль пользователя, значения задаются в отдельном enum Role, могут быть `USER` или `ADMIN`.

### DTO
- `SignUpRequest`: DTO для регистрации пользователя (поля: `username`, `email`, `password`).
- `SignInRequest`: DTO для входа пользователя (поля: `username`, `password`).
- `JwtAuthenticationResponse`: DTO для передачи JWT токена.
- `PasswordResetRequest`: DTO для запроса на сброс пароля (поля: `username`, `newPassword`, `confirmationCode`).

## Тестирование
- Покрыты тестами основные функциональные элементы: регистрация, логин, логаут и сброс пароля.
- Тесты проверяют корректность работы эндпоинтов, генерацию и валидацию JWT токенов, а также обработку различных случаев, включая неуспешную аутентификацию и сброс пароля.
